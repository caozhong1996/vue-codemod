import{j as e,r as F,w as j,d as v,a as C,i as b,o as I,C as N,b as g,c as h,e as y,f as _,u as E,p as L,g as x,h as M}from"./vendor.0b0ce47f.js";const P=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const t of s.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&a(t)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};P();function R(i,o){const r=i.find(e.Property,{key:{name:"data"}}).filter(t=>t.parent.parent.value.type==="ExportDefaultDeclaration"),a=r.nodes()[0];let n=[];if(a){const t=r.find(e.ReturnStatement,{argument:{type:"ObjectExpression"}}).filter(c=>c.parent.parent.parent.value.key.name==="data").nodes()[0];if(!e.ReturnStatement.check(t))throw new Error("No return statement found in data option");if(!e.ObjectExpression.check(t.argument))throw new Error("Return statement not a ObjectExpression");n=t.argument?.properties}const s=n.map(t=>({name:t.key.name,value:t.value,state:e.ObjectExpression.check(t.value)}));if(s.length){s.some(t=>!t.state)&&o.newImports.vue.push("ref"),s.some(t=>t.state)&&o.newImports.vue.push("reactive");for(const t of s)o.setupFn.body.body.push(e.variableDeclaration("const",[e.variableDeclarator(e.identifier(t.name),e.callExpression(e.identifier(t.state?"reactive":"ref"),[t.value]))])),o.returnStatement.argument.properties.push(e.property("init",e.identifier(t.name),t.value)),o.variables.push(t.name),t.state||o.valueWrappers.push(t.name)}return r.remove(),i}function f(i){const o=e.arrowFunctionExpression(i.params,i.body);return o.async=i.async,o}function S(i,o){const r=e.functionDeclaration(e.identifier(i),o.params,o.body);return r.async=o.async,r}function A(i,o){const r=i.find(e.Property,{key:{name:"computed"}}).filter(n=>n.parent.parent.value.type==="ExportDefaultDeclaration"),a=r.nodes()[0];if(a){if(o.newImports.vue.push("computed"),!e.ObjectExpression.check(a.value))throw new Error("No return statement found in computed option");r.forEach(n=>{let s;n.value.value.properties.forEach(c=>{if(e.FunctionExpression.check(c.value))s=[e.arrowFunctionExpression([],c.value.body)];else if(e.ObjectExpression.check(c.value)){const p=c.value.properties,l=p.find(m=>m.key.name==="get"),d=p.find(m=>m.key.name==="set");s=[l?f(l.value):null,d?f(d.value):void 0]}const u=c.key.name;o.setupFn.body.body.push(e.variableDeclaration("const",[e.variableDeclarator(e.identifier(u),e.callExpression(e.identifier("computed"),s))])),o.returnStatement.argument.properties.push(e.property("init",e.identifier(u),e.identifier(u))),o.variables.push(u),o.valueWrappers.push(u)})})}return r.remove(),i}function H(i,o){const r=i.find(e.Property,{key:{name:"watch"}}).filter(n=>n.parent.parent.value.type==="ExportDefaultDeclaration");return r.nodes()[0]&&(o.newImports.vue.push("watch"),r.forEach(n=>{n.value.value.properties.forEach(t=>{let c;if(e.Literal.check(t.key)){const p=`${t.key.value}`.split(".");o.valueWrappers.includes(p[0])&&p.splice(1,0,"value");const l=e(p.join("")).find(e.MemberExpression).paths()[0].value;c=e.arrowFunctionExpression([],l,!0)}else e.Identifier.check(t.key)&&(c=e.identifier(t.key.name));const u=[c];if(e.FunctionExpression.check(t.value))u.push(f(t.value));else if(e.ObjectExpression.check(t.value)){const p=t.value.properties,l=[];p.forEach(d=>{d.key.name==="handler"?u.push(f(d.value)):l.push(d)}),l.length&&u.push(e.objectExpression(l))}o.setupFn.body.body.push(e.expressionStatement(e.callExpression(e.identifier("watch"),u)))})}),r.remove()),i}function T(i,o){const r=i.find(e.Property,{key:{name:"methods"}}).filter(s=>s.parent.parent.value.type==="ExportDefaultDeclaration"),a=r.nodes()[0];return a&&(o.newImports.vue.push("watch"),a.value.properties.forEach(s=>{const t=s.key.name,c=s.value;o.methods?o.setupFn.body.body.push(e.variableDeclaration("const",[e.variableDeclarator(e.identifier(t),f(c))])):o.setupFn.body.body.push(S(t,c)),o.returnStatement.argument.properties.push(e.property("init",e.identifier(t),e.identifier(t))),o.variables.push(t)}),r.remove()),i}const $=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated"],B=["beforeRouteEnter","beforeRouteUpdate","beforeRouteLeave"];function V(i,{methods:o=!1}={}){const r={newImports:{vue:[],"vue-router":[]},returnStatement:e.returnStatement(e.objectExpression([])),setupFn:e.functionExpression(null,[],e.blockStatement([])),valueWrappers:[],variables:[],methods:o},a=e(i),n=a.find(e.ExportDefaultDeclaration).nodes()[0];if(!n)throw new Error("Default export not found");R(a,r),A(a,r),H(a,r),T(a,r),w(a,r.setupFn,$,r.newImports.vue),w(a,r.setupFn,B,r.newImports["vue-router"]),r.setupFn.body.body.length&&(r.setupFn.body.body.push(r.returnStatement),n.declaration.properties.push(e.methodDefinition("method",e.identifier("setup"),r.setupFn)),W(a,r.variables,r.valueWrappers));const s=[];for(const t in r.newImports)if(r.newImports[t].length){const c=r.newImports[t].map(p=>e.importSpecifier(e.identifier(p))),u=e.importDeclaration(c,e.stringLiteral(t));s.push(u)}return s.length&&a.find(e.ExportDefaultDeclaration).forEach(t=>t.insertBefore(...s)),a.toSource()}function w(i,o,r,a){i.find(e.ObjectMethod).filter(n=>r.includes(n.value.key.name)).forEach(n=>{const s=n.node.key.name,t=`on${s.charAt(0).toUpperCase()+s.slice(1)}`;a.push(t),o.body.body.push(e.expressionStatement(e.callExpression(e.identifier(t),[e.arrowFunctionExpression(n.node.params,n.node.body)])))}).remove()}function W(i,o,r){i.find(e.MethodDefinition,{key:{name:"setup"}}).find(e.MemberExpression).forEach(a=>{const n=a.value.property;if(e.ThisExpression.check(a.value.object)&&o.includes(n.name)){let s=e.identifier(n.name);r.includes(n.name)&&(s=e.memberExpression(s,e.identifier("value"))),a.replace(s)}})}const q=`
export default {
  data () {
    return {
      foo: 'bar',
    }
  },
  watch: {
    foo () {
      // do something...
    }
  },
  computed: {
    foofoo () {
      return this.foo.repeat(2)
    }
  }
}
`.trim();class z{state;constructor(){this.state=F({code:q,convertedCode:""}),j(()=>this.state.code,()=>{try{this.state.convertedCode=V(this.state.code)}catch{}},{immediate:!0})}}function k(i,o=100){let r;return(...a)=>{r&&clearTimeout(r),r=setTimeout(()=>{i(...a)},o)}}const O=v({props:{mode:{type:String,required:!1,default:"htmlmixed"},value:{type:String,required:!1,default:""},readonly:{type:Boolean,required:!1,default:!1}},emits:["change"],setup(i,{emit:o}){const r=i,a=C(),n=b("autoresize");return I(()=>{const s={autoCloseBrackets:!0,autoCloseTags:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]},t=N(a.value,{value:"",mode:r.mode,readOnly:r.readonly,tabSize:2,lineWrapping:!0,lineNumbers:!0,...s});t.on("change",()=>{o("change",t.getValue())}),g(()=>{const c=t.getValue();r.value!==c&&t.setValue(r.value)}),g(()=>{t.setOption("mode",r.mode)}),setTimeout(()=>{t.refresh()},50),n&&window.addEventListener("resize",k(()=>{t.refresh()}))}),(s,t)=>(h(),y("div",{class:"editor",ref_key:"el",ref:a},null,512))}});var D=(i,o)=>{const r=i.__vccOpts||i;for(const[a,n]of o)r[a]=n;return r};const U={class:"editor-container"},K=v({setup(i){const o=b("store");return(r,a)=>(h(),y("div",U,[_(O,{readonly:!0,mode:"javascript",value:E(o).state.convertedCode},null,8,["value"])]))}});var G=D(K,[["__scopeId","data-v-293f7a91"]]);const Y={class:"editor-container"},J=v({setup(i){const o=b("store"),r=k(a=>{o.state.code=a},250);return(a,n)=>(h(),y("div",Y,[_(O,{onChange:E(r),mode:"javascript",value:E(o).state.code},null,8,["onChange","value"])]))}});var Q=D(J,[["__scopeId","data-v-e18b6dc6"]]);const X={id:"app"},Z={class:"left"},ee={class:"right"},te=v({setup(i){return L("store",new z),(o,r)=>(h(),y("div",X,[x("div",Z,[_(Q)]),x("div",ee,[_(G)])]))}});M(te).mount("#app");
