var N=Object.defineProperty;var g=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var b=(o,r,e)=>r in o?N(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e,w=(o,r)=>{for(var e in r||(r={}))L.call(r,e)&&b(o,e,r[e]);if(g)for(var e of g(r))M.call(r,e)&&b(o,e,r[e]);return o};var k=(o,r,e)=>(b(o,typeof r!="symbol"?r+"":r,e),e);import{j as t,r as P,w as R,d as v,a as A,i as E,o as H,C as T,b as O,c as h,e as y,f as _,u as x,p as $,g as D,h as B}from"./vendor.ac37d352.js";const S=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}};S();function V(o,r){var a;const e=o.find(t.Property,{key:{name:"data"}}).filter(c=>c.parent.parent.value.type==="ExportDefaultDeclaration"),i=e.nodes()[0];let n=[];if(i){const c=e.find(t.ReturnStatement,{argument:{type:"ObjectExpression"}}).filter(u=>u.parent.parent.parent.value.key.name==="data").nodes()[0];if(!t.ReturnStatement.check(c))throw new Error("No return statement found in data option");if(!t.ObjectExpression.check(c.argument))throw new Error("Return statement not a ObjectExpression");n=(a=c.argument)==null?void 0:a.properties}const s=n.map(c=>({name:c.key.name,value:c.value,state:t.ObjectExpression.check(c.value)}));if(s.length){s.some(c=>!c.state)&&r.newImports.vue.push("ref"),s.some(c=>c.state)&&r.newImports.vue.push("reactive");for(const c of s)r.setupFn.body.body.push(t.variableDeclaration("const",[t.variableDeclarator(t.identifier(c.name),t.callExpression(t.identifier(c.state?"reactive":"ref"),[c.value]))])),r.returnStatement.argument.properties.push(t.property("init",t.identifier(c.name),c.value)),r.variables.push(c.name),c.state||r.valueWrappers.push(c.name)}return e.remove(),o}function f(o){const r=t.arrowFunctionExpression(o.params,o.body);return r.async=o.async,r}function W(o,r){const e=t.functionDeclaration(t.identifier(o),r.params,r.body);return e.async=r.async,e}function z(o,r){const e=o.find(t.Property,{key:{name:"computed"}}).filter(n=>n.parent.parent.value.type==="ExportDefaultDeclaration"),i=e.nodes()[0];if(i){if(r.newImports.vue.push("computed"),!t.ObjectExpression.check(i.value))throw new Error("No return statement found in computed option");e.forEach(n=>{let s;n.value.value.properties.forEach(c=>{if(t.FunctionExpression.check(c.value))s=[t.arrowFunctionExpression([],c.value.body)];else if(t.ObjectExpression.check(c.value)){const p=c.value.properties,l=p.find(m=>m.key.name==="get"),d=p.find(m=>m.key.name==="set");s=[l?f(l.value):null,d?f(d.value):void 0]}const u=c.key.name;r.setupFn.body.body.push(t.variableDeclaration("const",[t.variableDeclarator(t.identifier(u),t.callExpression(t.identifier("computed"),s))])),r.returnStatement.argument.properties.push(t.property("init",t.identifier(u),t.identifier(u))),r.variables.push(u),r.valueWrappers.push(u)})})}return e.remove(),o}function U(o,r){const e=o.find(t.Property,{key:{name:"watch"}}).filter(n=>n.parent.parent.value.type==="ExportDefaultDeclaration");return e.nodes()[0]&&(r.newImports.vue.push("watch"),e.forEach(n=>{n.value.value.properties.forEach(a=>{let c;if(t.Literal.check(a.key)){const p=`${a.key.value}`.split(".");r.valueWrappers.includes(p[0])&&p.splice(1,0,"value");const l=t(p.join("")).find(t.MemberExpression).paths()[0].value;c=t.arrowFunctionExpression([],l,!0)}else t.Identifier.check(a.key)&&(c=t.identifier(a.key.name));const u=[c];if(t.FunctionExpression.check(a.value))u.push(f(a.value));else if(t.ObjectExpression.check(a.value)){const p=a.value.properties,l=[];p.forEach(d=>{d.key.name==="handler"?u.push(f(d.value)):l.push(d)}),l.length&&u.push(t.objectExpression(l))}r.setupFn.body.body.push(t.expressionStatement(t.callExpression(t.identifier("watch"),u)))})}),e.remove()),o}function K(o,r){const e=o.find(t.Property,{key:{name:"methods"}}).filter(s=>s.parent.parent.value.type==="ExportDefaultDeclaration"),i=e.nodes()[0];return i&&(r.newImports.vue.push("watch"),i.value.properties.forEach(s=>{const a=s.key.name,c=s.value;r.methods?r.setupFn.body.body.push(t.variableDeclaration("const",[t.variableDeclarator(t.identifier(a),f(c))])):r.setupFn.body.body.push(W(a,c)),r.returnStatement.argument.properties.push(t.property("init",t.identifier(a),t.identifier(a))),r.variables.push(a)}),e.remove()),o}const q=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated"],G=["beforeRouteEnter","beforeRouteUpdate","beforeRouteLeave"];function Y(o,{methods:r=!1}={}){const e={newImports:{vue:[],"vue-router":[]},returnStatement:t.returnStatement(t.objectExpression([])),setupFn:t.functionExpression(null,[],t.blockStatement([])),valueWrappers:[],variables:[],methods:r},i=t(o),n=i.find(t.ExportDefaultDeclaration).nodes()[0];if(!n)throw new Error("Default export not found");V(i,e),z(i,e),U(i,e),K(i,e),F(i,e.setupFn,q,e.newImports.vue),F(i,e.setupFn,G,e.newImports["vue-router"]),e.setupFn.body.body.length&&(e.setupFn.body.body.push(e.returnStatement),n.declaration.properties.push(t.methodDefinition("method",t.identifier("setup"),e.setupFn)),J(i,e.variables,e.valueWrappers));const s=[];for(const a in e.newImports)if(e.newImports[a].length){const c=e.newImports[a].map(p=>t.importSpecifier(t.identifier(p))),u=t.importDeclaration(c,t.stringLiteral(a));s.push(u)}return s.length&&i.find(t.ExportDefaultDeclaration).forEach(a=>a.insertBefore(...s)),i.toSource()}function F(o,r,e,i){o.find(t.ObjectMethod).filter(n=>e.includes(n.value.key.name)).forEach(n=>{const s=n.node.key.name,a=`on${s.charAt(0).toUpperCase()+s.slice(1)}`;i.push(a),r.body.body.push(t.expressionStatement(t.callExpression(t.identifier(a),[t.arrowFunctionExpression(n.node.params,n.node.body)])))}).remove()}function J(o,r,e){o.find(t.MethodDefinition,{key:{name:"setup"}}).find(t.MemberExpression).forEach(i=>{const n=i.value.property;if(t.ThisExpression.check(i.value.object)&&r.includes(n.name)){let s=t.identifier(n.name);e.includes(n.name)&&(s=t.memberExpression(s,t.identifier("value"))),i.replace(s)}})}const Q=`
export default {
  data () {
    return {
      foo: 'bar',
    }
  },
  watch: {
    foo () {
      // do something...
    }
  },
  computed: {
    foofoo () {
      return this.foo.repeat(2)
    }
  }
}
`.trim();class X{constructor(){k(this,"state");this.state=P({code:Q,convertedCode:""}),R(()=>this.state.code,()=>{try{this.state.convertedCode=Y(this.state.code)}catch{}},{immediate:!0})}}function j(o,r=100){let e;return(...i)=>{e&&clearTimeout(e),e=setTimeout(()=>{o(...i)},r)}}const C=v({props:{mode:{default:"htmlmixed"},value:{default:""},readonly:{type:Boolean,default:!1}},emits:["change"],setup(o,{emit:r}){const e=o,i=A(),n=E("autoresize");return H(()=>{const s={autoCloseBrackets:!0,autoCloseTags:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]},a=T(i.value,w({value:"",mode:e.mode,readOnly:e.readonly,tabSize:2,lineWrapping:!0,lineNumbers:!0},s));a.on("change",()=>{r("change",a.getValue())}),O(()=>{const c=a.getValue();e.value!==c&&a.setValue(e.value)}),O(()=>{a.setOption("mode",e.mode)}),setTimeout(()=>{a.refresh()},50),n&&window.addEventListener("resize",j(()=>{a.refresh()}))}),(s,a)=>(h(),y("div",{class:"editor",ref_key:"el",ref:i},null,512))}});var I=(o,r)=>{const e=o.__vccOpts||o;for(const[i,n]of r)e[i]=n;return e};const Z={class:"editor-container"},ee=v({setup(o){const r=E("store");return(e,i)=>(h(),y("div",Z,[_(C,{readonly:!0,mode:"javascript",value:x(r).state.convertedCode},null,8,["value"])]))}});var te=I(ee,[["__scopeId","data-v-62d9ebdc"]]);const re={class:"editor-container"},oe=v({setup(o){const r=E("store"),e=j(i=>{r.state.code=i},250);return(i,n)=>(h(),y("div",re,[_(C,{onChange:x(e),mode:"javascript",value:x(r).state.code},null,8,["onChange","value"])]))}});var ne=I(oe,[["__scopeId","data-v-7a7466f4"]]);const se={id:"app"},ae={class:"left"},ie={class:"right"},ce=v({setup(o){return $("store",new X),(r,e)=>(h(),y("div",se,[D("div",ae,[_(ne)]),D("div",ie,[_(te)])]))}});B(ce).mount("#app");
